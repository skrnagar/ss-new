
Build Error
Failed to compile

Next.js (14.2.16) is outdated (learn more)
./lib/supabase-server.ts
Error: 
  × the name `createServerComponentClient` is defined multiple times
    ╭─[/home/runner/workspace/lib/supabase-server.ts:1:1]
  1 │ import { cookies } from 'next/headers'
  2 │ import { createServerClient } from '@supabase/ssr'
  3 │ import { createServerComponentClient } from '@supabase/auth-helpers-nextjs'
    ·          ─────────────┬─────────────
    ·                       ╰── previous definition of `createServerComponentClient` here
  4 │ import { Database } from '@/types/supabase'
  5 │ import { createClient as createSupabaseClient } from '@supabase/supabase-js';
  6 │ import { cache } from 'react';
  7 │ 
  8 │ // Create a cached version of the client to improve performance
  9 │ export const createLegacyClient = cache(() => {
 10 │   return createSupabaseClient(
 11 │     process.env.NEXT_PUBLIC_SUPABASE_URL!,
 12 │     process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
 13 │   );
 14 │ });
 15 │ 
 16 │ export function createClient() {
 17 │   const cookieStore = cookies()
 18 │ 
 19 │   const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!
 20 │   const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
 21 │ 
 22 │   if (!supabaseUrl || !supabaseAnonKey) {
 23 │     throw new Error('Supabase URL or key is missing in environment variables')
 24 │   }
 25 │ 
 26 │   return createServerClient(
 27 │     supabaseUrl,
 28 │     supabaseAnonKey,
 29 │     {
 30 │       cookies: {
 31 │         get(name) {
 32 │           return cookieStore.get(name)?.value
 33 │         },
 34 │         set(name, value, options) {
 35 │           cookieStore.set({ name, value, ...options })
 36 │         },
 37 │         remove(name, options) {
 38 │           cookieStore.set({ name, value: '', ...options })
 39 │         },
 40 │       },
 41 │     }
 42 │   )
 43 │ }
 44 │ 
 45 │ // This function remains unchanged as the changes only affect the legacy client.
 46 │ export function createServerComponentClient() {
    ·                 ─────────────┬─────────────
    ·                              ╰── `createServerComponentClient` redefined here
 47 │   return createServerComponentClient<Database>({ cookies });
 48 │ }
    ╰────
This error occurred during the build process and can only be dismissed by fixing the error.